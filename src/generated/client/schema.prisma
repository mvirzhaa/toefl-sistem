// prisma/schema.prisma

generator client {
  provider = "prisma-client-js" // <--- INI YANG BENAR (Ada -js nya)
  output   = "../src/generated/client" // Kita rapikan path-nya ke sini
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Model Soal (Pastikan ini ada!)
model Question {
  id   String @id @default(cuid())
  type String @default("MULTIPLE_CHOICE") // Biarkan ini untuk kompatibilitas

  // TAMBAHAN BARU
  questionType String  @default("CHOICE") // 'CHOICE' atau 'ESSAY'
  imageUrl     String? @db.Text // Untuk simpan kode gambar (Base64)

  category     String
  questionText String
  audioUrl     String?

  // Opsi Jawaban (Tetap ada, kalau Esai nanti dikosongkan)
  options       String[]
  correctAnswer String

  createdAt DateTime @default(now())
}

// Model lain biarkan saja...

// prisma/schema.prisma

// ... model Question tetap sama ...

model TestSession {
  id    String @id @default(cuid())
  // HAPUS: userId String
  // GANTI DENGAN 3 BARIS INI:
  name  String
  email String
  phone String

  score     Int
  totalQ    Int
  answers   Json
  createdAt DateTime @default(now())
}

model Setting {
  id        String   @id @default(cuid())
  key       String   @unique // Contoh: "exam_duration"
  value     String // Contoh: "120"
  updatedAt DateTime @updatedAt
}

model VerificationToken {
  id        String   @id @default(cuid())
  email     String
  token     String // Kode 6 digit (misal: 123456)
  expiresAt DateTime // Token kadaluarsa kapan
  createdAt DateTime @default(now())
}
